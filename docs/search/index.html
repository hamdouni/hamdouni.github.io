<!doctype html><html><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Brahim Hamdouni's website"><title>Barim's blog · ابراهيم - </title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/syntax.css><body><nav><details><summary><div><svg xmlns="http://www.w3.org/2000/svg" class="icon open" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon close" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg><span>Barim's blog · ابراهيم</span></div><span class=lang><a href=https://brahim.hamdouni.com/search/>fr</a></span></summary><div class=links><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0 7-7 7 7M5 10v10a1 1 0 001 1h3m10-11 2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>Home
</a><a href=/post><svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/></svg>Posts
</a><a href=/lists><svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4A1 1 0 003 5v14a1 1 0 001 1z"/></svg>Lists
</a><a href=/search><svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg>Search
</a><a href=/about><svg xmlns="http://www.w3.org/2000/svg" class="icon" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7A4 4 0 118 7a4 4 0 018 0zm-4 7a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>About</a></div></details></nav><main><form id=searchform onsubmit=return!1><input type=text placeholder=Search name=q id=q oninput=handleChange() autocomplete=off autofocus></form><div id=results></div></main></body><script src=/lunr/lunr.min.js></script><script src=/lunr/lunr.stemmer.support.js></script><script src=/lunr/lunr.fr.js></script><script>function debounce(e,t){var n;return function(){var s=this,o=arguments,i=function(){n=null,e.apply(s,o)};clearTimeout(n),n=setTimeout(i,t)}}const handleChange=debounce(e=>{const t=document.getElementById("q").value;search(t)},300);function search(e){const s=document.getElementById("results"),t=idx.search(e);if(!e){s.innerHTML="Veuillez indiquer un terme de recherche.";return}if(!t.length){s.innerHTML="Aucun résultat trouvé.";return}let o=t.length==1?" résultat":" résultats",n='<span class="head">'+t.length+o+"</span>";for(const s in t){const e=store[t[s].ref];n+='<div class="result">',n+='<span class="date">'+e.date+'</span><a href="'+e.url+'"><span class="title">'+e.title+"</span></a>",n+='<a href="'+e.url+'" class="sumup">'+e.content.substring(0,150)+"...</a>",n+="</div>"}s.innerHTML=n}const store={"/post/2023-12-24-neovim-languagetool/":{title:"Use LanguageTool with neovim",tags:[],content:`I do a lot of mistakes when typing. The use of a spellchecker in neovim is easy but not enough : I mostly do grammar mistakes.
So how can we leverage neovim to not only check for spelling but also for grammar ? And if possible, how to do it for multiple languages as I also write in French ?
We can integrate LanguageTool 1 with neovim using LTeX 2.
This is my plan
Install LTeX in neovim using Mason Apply LanguageTool suggestion using Code Actions Use Telescope for the code actions suggestion Tips : force the language in Markdown Install LTeX in neovim using Mason You can manually install LTeX in neovim with the following command
:MasonInstall ltex-ls But, if you want to make it permanent in your configuration or you want to change its default options, you will need to add it to your neovim init.lua. I have a special section for neovim to install and configure all my language servers in neovim. I declare an array servers :
local servers = { ... } and inside, for each language, I have this sort of snippet :
ltex = { ltex = { language = &#34;fr&#34; }, }, This one is for LTeX, setting the default language to French. The first key is the language server name and the second is its settings object. It is not always the same as for ltex. See, for example, the Lua version :
lua_ls = { Lua = { workspace = { checkThirdParty = false }, telemetry = { enable = false }, }, }, Here we have lua_ls for the language server name and Lua for the object setting.
Then, I have this code to configure all servers via mason :
-- Ensure the servers are installed local mason_lspconfig = require &#39;mason-lspconfig&#39; mason_lspconfig.setup { ensure_installed = vim.tbl_keys(servers), -- take every key entry to install the corresponding language server } mason_lspconfig.setup_handlers { function(server_name) require(&#39;lspconfig&#39;)[server_name].setup { capabilities = capabilities, on_attach = on_attach, settings = servers[server_name], -- associate each language server setting } end, } Apply LanguageTool suggestions So now that we have LTeX configured, how can we use it ?
As LTeX works with LSP, like any other language server, we can use the Code Actions to apply suggestions.
For example, we can use this command :
:lua vim.lsp.buf.code_action() This brings the default neovim ui to select an action.
You better remap this to a key combination to make it more easily actionable :
vim.keymap.set(&#39;n&#39;, &#39;&lt;leader&gt;ca&#39;, vim.lsp.buf.code_action, {desc = &#39;Code Action&#39;}, {noremap = true, silent = true}) Use Telescope as UI selector The default code actions picker of neovim is minimalist : we have to type the number associated with the action we want to apply and then press enter.
There is a nice plugin to make Telescope the default ui selector. I added this lines to my init.lua :
{ &#39;nvim-telescope/telescope-ui-select.nvim&#39;, config = function() require(&#34;telescope&#34;).load_extension(&#34;ui-select&#34;) end, } Relaunch neovim and now, Telescope is used as a picker for the code actions.
Tips : force the language in Markdown By default, LTeX will use the default language we have configured above. But, what if you need to write a post in another language ?
An easy way is to provide LTeX with a special header in the front matter of your markdown :
--- title: A nice title date: 2023-12-25T01:18:29+01:00 lang: en-US --- The lang entry contains the language code expected by LTeX as seen in https://valentjn.github.io/ltex/supported-languages.html
LanguageTool is a multilingual spelling, style and grammar checker&#160;&#x21a9;&#xfe0e;
LTeX plugs LanguageTool with editors via language server protocol (LSP)&#160;&#x21a9;&#xfe0e;
`,url:"/post/2023-12-24-neovim-languagetool/",date:"2023-12-24"},"/post/2023-10-29-svelte-tabs/":{title:"Create tabs in Svelte",tags:["tuto","svelte"],content:`I often need to code some way to have multiple pages rendered in the same location : think about a configuration panel with several sub panels. The natural way to code this is using tabs.
In this tutorial, I&rsquo;ll use Svelte to code a simple application showing two tabs that can be easily extended to manage more tabs.
As usual, let&rsquo;s start a new Svelte project using Esbuild, by following my previous post Set up a Svelte project using ESBuild
You can also follow along on my GitHub page or on this Svelte Repl.
The file &ldquo;app.svelte&rdquo; will have all the logic to manage the tabs.
We will add 2 more files to showcase the tabs :
t_identity.svelte : the main tab (showed by default) t_password.svelte : another tab that will reuse our password chooser from my last post Tutorial : Password Creation in Svelte The content of these two files is not relevant for this tutorial. Our main focus will be on the app.svelte file :
&lt;script&gt; import Identity from &#34;./t_identity.svelte&#34;; import Password from &#34;./t_password.svelte&#34;; let tabs = [ { name: &#34;Identity&#34;, comp: Identity }, { name: &#34;Password&#34;, comp: Password }, ]; let cur = tabs[0]; &lt;/script&gt; We begin the script section by importing our two tabs : Identity and Password.
Then we add them to an array tabs. We use a simple object with one field for the name and one field for storing the component. So if we want to add more tabs, we only need to import the component and add it to the array tabs.
Lastly, we declare a cur variable to store the current tab selected : by default, we&rsquo;ll use the first one in the array. So cur will contain an object with the name of tab and the component to show.
OK, that&rsquo;s all for the JavaScript part, let&rsquo;s see the HTML part :
{#each tabs as tab} &lt;button class:selected={cur === tab} on:click={() =&gt; (cur = tab)}&gt; {tab.name} &lt;/button&gt; {/each} &lt;main&gt; &lt;svelte:component this={cur.comp} /&gt; &lt;/main&gt; We construct the tabs as buttons with a #each loop, iterating on the array tabs declared above :
class:selected={cur === tab} will affect the class selected to this button if it is the current tab (cur), so we can stylize the selected tab. on:click={() =&gt; (cur = tab)} will react to a click on the button by changing the current selected tab. {tab.name} will be the name inside the button. The important code is in the main section with the svelte:component directive.
This Svelte directive can render any component we give it. We use the fact that we stored the current tab in the cur variable, precisely, the component is in the comp field of our simple object.
So &lt;svelte:component this={cur.comp} /&gt; will render the tab at this location.
And that&rsquo;s it ! We have now a way to manage tabs with Svelte, the rest is just some CSS styling. All source code is available on GitHub.
`,url:"/post/2023-10-29-svelte-tabs/",date:"2023-10-29"},"/post/2023-10-07-svelte-password-creation/":{title:"Tuto: Password Creation in Svelte",tags:["tuto","svelte"],content:`So, a few days ago, I saw a video showing a password creation form.
Each time the user types anything, there is an instant validation with icons indicating which constraint is fulfilled.
I thought it was a nice way to give instant feedback to the user. But can I reproduce this behavior using Svelte ? Let&rsquo;s see !
First, let us set up a new Svelte project using esbuild. You can follow instructions in my post Set up a Svelte project using ESBuild
We&rsquo;ll start with one rule : the password length is 8 characters minimum. This way, we can &ldquo;feel&rdquo; how we can solve the problem for all the controls, setup all needed elements, without having too much in our plate. Change the app.svelte file as below :
&lt;svelte:options customElement=&#34;app-input&#34; /&gt; &lt;script&gt; let pass = &#34;&#34;; let validLength = false; function check() { validLength = (pass.length &gt;= 8); } $: check(pass); &lt;/script&gt; &lt;input bind:value={pass} type=&#34;password&#34;&gt; &lt;span class:valid={validLength}&gt; 8+ &lt;/span&gt; &lt;style&gt; .valid {background-color: green;} &lt;/style&gt; If we try this, we can see that nothing happens if we type a password until it reaches 8 characters length : then the 8+ background changes to green !
Let&rsquo;s review the code to understand what is happening here.
In the script section, we start by declaring two variables :
pass will contain the user input
validLength will indicate if the length rule is respected or not
Then, we define the check function : a straight forward validation of the password length.
The next line is more interesting. We use the $: directive to monitor any change to the password and check its validity.
$: check(pass); So now, every time the variable pass is changed, Svelte will invoke the check function.
Below the script section, we define the HTML part by declaring the input field. It will be automatically bound to the pass variable.
&lt;input bind:value={pass} type=&#34;password&#34;&gt; So, when the user enters characters in the input field, Svelte takes care of updating the pass variable.
In Svelte, we can also bind a CSS class to an element. Here, the span tag will be assigned the CSS class valid only if the validLengh variable is true.
&lt;span class:valid={validLength}&gt; 8+ &lt;/span&gt; The valid class is defined in the style section : just a green background.
.valid {background-color: green;} This is roughly all we need : the mechanism to live check the password for every keystroke and changing dynamically the style. So for the other controls, we&rsquo;ll apply the same logic.
To check if the password contains lower and upper case characters, we&rsquo;ll declare a new variable validCase :
let validCase = false; Then we&rsquo;ll add the HTML part :
&lt;span class:valid={validCase}&gt; a..Z &lt;/span&gt; Finally, we&rsquo;ll complete our check function to add the control :
validCase = pass.toUpperCase() != pass &amp;&amp; pass.toLowerCase() != pass; The trick here is to compare the password to its upper and lower case versions. The control fails if it is the same as one of them.
OK, for the last control, the presence of a special character, we&rsquo;ll add this HTML :
&lt;span class:valid={validSpecial}&gt;~&amp;#&lt;/span&gt; And we&rsquo;ll apply a regular expression in the check function :
validSpecial = pass.replaceAll(/\\w/g, &#34;&#34;).length &gt; 0; This will remove all non-special characters and if it remains something, then there is at least one special character.
That is all, folks ! We have now a complete password creation form with live checking controls and instant feedback, with Svelte in one web component !
You can find the complete code in my repo Tutorial Svelte Password.
`,url:"/post/2023-10-07-svelte-password-creation/",date:"2023-10-07"},"/post/2023-10-04-go-learning-ressources/":{title:"Go Learning Resources",tags:["go"],content:`This is a list of useful resources you can access freely on the web, to learn Go :
Go Playground : Try Go without installing nothing on your computer.
Learn Go with Tests : I like this one because not only you learn the language but also the good practice to test your code.
Go by Example : Showing code example with annotations helps understand common usage of the language.
A Huge Number of Go Examples, Exercises and Quizzes : I think this is a good way to practice a new language, looking for errors in a program and trying to fix them. The format is not easy to follow : it is a git repository and documents are in folders as markdown file or PDF.
This is one of the most famous tribute to Go as a useful language :
How Go helped save HealthCare.gov featuring Paul Smith, CTO of Ad Hoc (Go Time #154 podcast)
This list is a work in progress and will be updated each time I find a valuable resource
`,url:"/post/2023-10-04-go-learning-ressources/",date:"2023-10-04"},"/post/2023-09-29-esbuild-svelte-setup/":{title:"Tuto: Setup a Svelte project using esbuild",tags:["tuto","svelte"],content:`This article will show you how to set up a new Svelte project to develop a custom tag, using esbuild, with live reloading.
First, why use esbuild ? Well, it&rsquo;s a very fast bundler that&rsquo;s easy to set up, and I did not find a lot of tutorials about Svelte and esbuild.
Next, what is a custom tag ? It&rsquo;s an HTML tag, like &lt;pre&gt; or &lt;input&gt; but we are in charge to define its behavior and its look, thanks to some JavaScript code. In fact, thanks to Svelte, we can define both in a single component.
So, to do just that, in a new directory, we will create 4 files :
package.json : defines all JavaScript dependencies esbuild.js : script to launch the local server, watch files and reload Svelte index.html : our main web page app.svelte : the Svelte custom tag component package.json This is where we declare our dependencies. We need esbuild and its svelte plugin. Obviously, we also need Svelte.
{ &#34;type&#34;: &#34;module&#34;, &#34;dependencies&#34;: { &#34;esbuild&#34;: &#34;^0.19.4&#34;, &#34;esbuild-svelte&#34;: &#34;^0.8.0&#34;, &#34;svelte&#34;: &#34;^4.2.1&#34; } } To install all of them, execute the npm install command:
npm i If you don&rsquo;t want to create the package.json by hand, you can use this npm command :
npm i esbuild esbuild-svelte svelte But do not forget to add the line &quot;type&quot;: &quot;module&quot;, or you&rsquo;ll get an error at build time.
File esbuild.js The esbuild script builds, watches and reloads the Svelte application.
import * as esbuild from &#39;esbuild&#39;; import sveltePlugin from &#39;esbuild-svelte&#39;; let ctx = await esbuild.context({ entryPoints: [&#39;app.svelte&#39;], bundle: true, format: &#39;esm&#39;, outdir: &#39;./build&#39;, plugins: [ sveltePlugin({ compilerOptions: { customElement: true} }) ], banner: { js: &#34;new EventSource(&#39;http://127.0.0.1:8888/esbuild&#39;).addEventListener(&#39;change&#39;, () =&gt; location.reload())&#34; }, logLevel: &#39;info&#39; }); await ctx.watch(); await ctx.serve({ servedir: &#39;./&#39;, port: 8888, host: &#39;127.0.0.1&#39; }); The entryPoints lists Svelte component main files : in this example, we only have app.svelte.
We want to create a custom tag (web component) so we need to force the format to esm and also activate the option customElement in the Svelte plugin.
This script will start a local server from the local directory (see servedir path) on port 8888 and watch for any changes and reload the page if any, by injecting a JavaScript code inside the rendered HTML, thanks to the banner esbuild directive.
File index.html Create an index.html file :
&lt;!DOCTYPE html&gt; &lt;html lang=&#34;en&#34;&gt; &lt;head&gt; &lt;title&gt;&lt;/title&gt; &lt;meta charset=&#34;UTF-8&#34;&gt; &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1&#34;&gt; &lt;script defer src=&#34;build/app.js&#34; type=&#34;module&#34;&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;app-input/&gt; &lt;/body&gt; &lt;/html&gt; You can see that we use our web component app-input as any HTML tag. It is that easy with Svelte. Just use a two words tag with a dash separation, so the browser knows it is a custom tag.
File app.svelte And lastly, add a file &lsquo;app.svelte&rsquo; that will define our web component :
&lt;svelte:options customElement=&#34;app-input&#34; /&gt; Hello world Now, launch your local server with :
node esbuild.js If all is ok, you can connect your browser to http://localhost:8888/ and get the greeting message.
You can update your code and see the live refresh. Happy coding !
`,url:"/post/2023-09-29-esbuild-svelte-setup/",date:"2023-09-29"},"/post/2023-07-26-svelte-tag-input/":{title:"Tuto: Tags in Svelte",tags:["tuto","svelte"],content:`
I want to code a simple tags input component in Svelte like the animation above.
An input text where I can type words. As soon as I type a comma or Enter, the input turns into a &ldquo;tag&rdquo;. The tag appears next to the input text with a small cross to delete it. I can retrieve the list of tags in an easy-to-use data structure: for example, an array of string.
I&rsquo;ll use the Svelte Repl for this tutorial.
Exploring possibilities In Svelte, on:keydown triggers a function on every key press. So I create a small piece of code to highlight this behavior:
&lt;script&gt; function pressed(ev){ console.info(ev.key); }; &lt;/script&gt; &lt;input on:keydown={pressed}/&gt; keydown call pressed function passing an event object as parameter. I&rsquo;m only interested in the key information inside this object as it contains the key pressed by the user.
Each press on the keyboard, with the cursor in the text field, will cause a display in the console.
So, I can monitor the input waiting for a comma by doing a test on key:
&lt;script&gt; function pressed(ev){ if(ev.key === &#39;,&#39;) { console.info(&#34;VIRGULE!!!&#34;) } }; &lt;/script&gt; &lt;input on:keydown={pressed}/&gt; We&rsquo;ve got something, now let&rsquo;s use that.
Into the heart of the matter When you press comma, that&rsquo;s when you have a tag to add: so I take the content of the input field and I add it to my list.
To see what I&rsquo;m doing, I add a line with &lsquo;{tags}&rsquo; which will display the list of saved tags:
&lt;script&gt; let tags = []; // save tags here let value = &#34;&#34;; // input value function pressed(ev){ if(ev.key === &#39;,&#39;) { // comma ? tags = [...tags, value]; // add to the list value = &#34;&#34;; // and clean input } }; &lt;/script&gt; {tags} &lt;input on:keydown={pressed} bind:value/&gt; Small problem: the comma remains in the field despite the cleaning.
The keydown intercepts the event before the key is taken into account by the input field. So our processing is fired before the comma is added in the value variable.
Instead of keydown, we will rather use keyup, which will trigger our function after input is taken care. So the comma will be embedded in the value of the field.
&lt;script&gt; let tags = []; let value = &#34;&#34;; function pressed(ev){ if(ev.key === &#39;,&#39;) { tags = [...tags, value]; value = &#34;&#34;; } }; &lt;/script&gt; {tags} &lt;input on:keyup={pressed} bind:value/&gt; &lt;!-- keyup instead of keydown --&gt; Now the comma no longer stays in the field, but is part of the &lsquo;value&rsquo;.
I can easily remove it before adding to the list:
value = value.replace(&#39;,&#39;,&#39;&#39;); So now my code looks like :
&lt;script&gt; let tags = []; let value = &#34;&#34;; function pressed(ev){ if(ev.key === &#39;,&#39;) { value = value.replace(&#39;,&#39;,&#39;&#39;); // &lt;-- here we remove comma tags = [...tags, value]; value = &#34;&#34;; } }; &lt;/script&gt; {tags} &lt;input on:keyup={pressed} bind:value/&gt; Before continuing, I make sure that the user does not enter anything wrong in the field. For example, a single comma or the Enter key with no value should have no effect, which is not the case with the current code.
So, once I remove the comma, if I have nothing left, it means I have nothing to do:
&lt;script&gt; let tags = []; let value = &#34;&#34;; function pressed(ev){ if(ev.key === &#39;,&#39;) { value = value.replace(&#39;,&#39;,&#39;&#39;); if(value !== &#34;&#34;) { // &lt;-- not empty ? tags = [...tags, value]; // &lt;-- let&#39;s work... value = &#34;&#34;; } } }; &lt;/script&gt; {tags} &lt;input on:keyup={pressed} bind:value/&gt; I don&rsquo;t like this multi-nested level. I rather reverse the tests and exit immediately if the conditions are not met. Thus, I end up with the &ldquo;good code&rdquo; aligned to the left.
Demonstration:
&lt;script&gt; let tags = []; let value = &#34;&#34;; function pressed(ev){ if(ev.key !== &#39;,&#39;) return; value = value.replace(&#39;,&#39;,&#39;&#39;); if(value === &#34;&#34;) return; tags = [...tags, value]; value = &#34;&#34;; }; &lt;/script&gt; {tags} &lt;input on:keyup={pressed} bind:value/&gt; Oh, I forgot I wanted to use also Enter as a tag separator :
&lt;script&gt; let tags = []; let value = &#34;&#34;; function pressed(ev){ if(ev.key !== &#39;,&#39; &amp;&amp; ev.key !== &#39;Enter&#39;) return; // &lt;-- Enter too value = value.replace(&#39;,&#39;,&#39;&#39;); tags = [...tags, value]; value = &#34;&#34;; }; &lt;/script&gt; {tags} &lt;input on:keyup={pressed} bind:value/&gt; Time to take care of the visualization of the tags : I iterate on every saved tags with the #each command:
{#each tags as t,i} ... {/each} #each takes every item inside the tags array and makes it available in the t variable with its index in i.
Let&rsquo;s use this to display each tag with an X next to it. The X is used to remove the tag.
It&rsquo;s not a real X, it&rsquo;s an utf8 code that looks way more stylish 😎.
{#each tags as t,i} {t} ⨉ {/each} Ok, the X is not actionable yet, so I add an anchor around it with a call to a del function with the index of the tag to remove.
{#each tags as t,i} {t} &lt;a href=&#34;#del&#34; on:click={()=&gt;del(i)}&gt;⨉&lt;/a&gt; {/each} The del function just calls Splice.
function del(idx){ tags.splice(idx,1); // &lt;-- remove the element at index \`idx\` tags = tags; // &lt;-- force Svelte reactivity } The line with tags = tags is used to force Svelte to refresh. This is one of the rare cases where I need to explicitly indicate to Svelte that de data model has changed.
I surround each tag with a &lsquo;span&rsquo; element and add a little touch of CSS to make it look more taggy:
{#each tags as t,i} &lt;span class=&#34;tag&#34;&gt; {t} &lt;a href=&#34;#del&#34; on:click={()=&gt;del(i)}&gt;⨉&lt;/a&gt; &lt;/span&gt; {/each} &lt;input on:keyup={pressed} bind:value/&gt; &lt;style&gt; .tag {font-size: 0.8rem; margin-right:0.33rem; padding:0.15rem 0.25rem; border-radius:1rem; background-color: #5AD; color: white;} .tag a {text-decoration: none; color: inherit;} &lt;/style&gt; Icing on the cake: suggestions! It will be nice if I can have suggestions as I type the first characters.
HTML let us the possibility to add suggestions in an input field, from a predefined list: datalist contains the suggestions list, and we use it with the list property inside the input field.
I define a new tagsugg variable with all my suggestions:
let tagsugg = [&#34;tag1&#34;, &#34;tag2&#34;, &#34;tag3&#34;]; In a real project, this list can be generated from all previously saved tags in the system.
From this list, I construct the HTML datalist:
&lt;datalist id=&#34;tag_suggestion&#34;&gt; {#each tagsugg as ts} &lt;option&gt;{ts}&lt;/option&gt; {/each} &lt;/datalist&gt; Then I can reference it inside the input field with the list property:
&lt;input list=&#34;tag_suggestion&#34; on:keyup={pressed} bind:value/&gt; That&rsquo;s it (for the moment) !
I now have an input text field that generates tags with a suggestion list !
A very useful evolution is to transform this code to a web component, so it can be used like an HTML tag (no pun intended 😎).
You can get the complete code with comments on this Repl Svelte page
`,url:"/post/2023-07-26-svelte-tag-input/",date:"2023-07-25"},"/post/2023-03-31-go-is-object/":{title:"Is Go Object Oriented ?",tags:["thinking","go"],content:`During a discussion on a Discord channel, a message puzzled me: Go is not an object-oriented language.
I knew Go didn&rsquo;t have an inheritance mechanism. But, was that enough to disqualify it as an object language ?
Allow me to share with you my thoughts on the subject.
But first, what is an object language ? Wikipedia defines an object as a representation of a concept, idea, or entity in the physical world1, with properties and behaviors.
For example, we could represent a car by its brand, color and fuel. That would represent its properties.
For its behavior, we can say that a car can start, accelerate and brake.
In the same entity, we find data to store the states (properties), and functions or methods to interact with the object (behavior).
So, the definition of an object language would be a language that allows data and functions to be grouped together in the same structure?
Not so simple because with the arrival of new languages, or the evolution of some, this definition has evolved. Today, we can define an object language according to the following criteria :
Encapsulation: the object has a state (data) and a behavior (methods). We are clearly in the definition of the object seen above.
Abstraction: the object can &ldquo;hide&rdquo; its internal functioning and expose an interface allowing other objects to interact with it.
Inheritance: the object can adopt the behavior of another object without it being necessary to redefine this behavior.
Polymorphism: either the same behavior changes according to the object to which it applies, or an inherited behavior is redefined.
Does Go tick all the boxes of an object language ? Encapsulation A struct is a collection of data in Go. Here is how I will define a new type &lsquo;Point&rsquo; as a composite object containing its position:
type Point struct { X, Y float64 } It is possible to define methods on types thanks to the receiver. We add the type that receives the method before the name of the method. For example :
func (p Point) Dist() float64 { return math.Sqrt(p.X*p.X + p.Y*p.Y) } The ingredients for encapsulation are all there: a way to bundle data and behaviors.
Abstraction Data visibility from the outside2 is defined by the case of the variable name: lower case for a private variable and upper case for a public variable. For example :
type Car struct { Color string // accessible from outside code string // not accessible from outside } The same principle is applied for methods which, if their name begins with a lowercase letter, cannot be used externally. Conversely, if their name begins with a capital letter, they will be visible.
Go calls this mechanism the export of names and allows functionality to be hidden or exposed, as defined by the abstraction.
Inheritance I said above that I knew Go had no inheritance. But that doesn&rsquo;t necessarily mean that Go doesn&rsquo;t achieve the same thing as inheritance. Indeed, Go allows type embedding.
For example, let&rsquo;s take the example of the car and define a &ldquo;Vehicle&rdquo; object with a &ldquo;Move&rdquo; method:
type Car struct { Name string } func (v Vehicle) Move() { println(&#34;I move&#34;) } Anything that makes up a vehicle can be incorporated into a &ldquo;Car&rdquo; object as follows:
type Car struct { Vehicle } What if we had to use all of this:
var tuture Car tuture.Vehicle.Move() // &#34;I move&#34; tuture.Move() // &#34;I move&#34; Complete example on the playground
The two calls to the &ldquo;Move&rdquo; method are valid and there is a way to inherit behaviors from one object to another.
Polymorphism In the previous example, the 2 calls to the &ldquo;Move&rdquo; method gave the same result because they called the same &ldquo;Move&rdquo; method defined at the level of the &ldquo;Vehicle&rdquo; object. We can redefine the method at the &ldquo;Car&rdquo; level as follows:
func (v Car) Move() { println(&#34;I move like a car&#34;) } Therefore, calls to &ldquo;Move&rdquo; would give different results:
var tuture Car tuture.Vehicle.Move() // &#34;I move&#34; tuture.Move() // &#34;I move like a car&#34; A method inherited from a parent object can therefore be modified at the child object level.
But we can go further. Go has the notion of interface which allows us to define types by their behavior. Concretely, an interface is a collection of methods.
type Vehicle interface { Move() } type Car struct {} func (v Car) Move() { println(&#34;I move like a car&#34;) } type Bus struct {} func (c Bus) Move() { println(&#34;I move like a bus&#34;) } func Check(v Vehicle) { v.Move() } We could then call &ldquo;Check&rdquo; either with a &ldquo;Car&rdquo; type or a &ldquo;Bus&rdquo; type as in the following example:
var tuture Car var minibus Bus Check(tuture) // &#34;I move like a car&#34; Check(minibus) // &#34;I move like a bus&#34; Complete example on the playground
With the redefinition of inherited methods and interfaces, Go implements polymorphism at several levels.
Conclusion Go is indeed an object language. So what ?
What matters much more than ticking the boxes of this or that paradigm is giving coders all needed tools to do their job as well as possible. The designers of Go took from other languages what seemed to them the most relevant to make the code readable, efficient and maintainable.
In my opinion, Go remains an extremely productive language in my daily life as a developer.
Wikipedia page on object-oriented languages&#160;&#x21a9;&#xfe0e;
The notion of exterior must be understood in the sense of packages which is the mechanism for variables and functions scope in Go&#160;&#x21a9;&#xfe0e;
`,url:"/post/2023-03-31-go-is-object/",date:"2023-03-31"},"/post/2023-02-01-microsoft-edge-linux-i386/":{title:"Make Microsoft Edge coexist with i386",tags:[],content:`On my workstation, I manage both amd64 and i386 architecture.
When I try to install Microsoft Edge on my Linux, after the apt update, I have this message:
The configured file &#34;main/binary-i386/Packages&#34; will not be taken into account because the repository &#34;https://packages.microsoft.com/repos/edge stable InRelease&#34; does not support the &#34;i386&#34; architecture The solution We must specify in the configuration of the package repository that it is an amd64 architecture, and thus we avoid that it tries to install i386 for edge, when there is none.
# import keys sudo wget -O- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor | sudo tee /usr/share/keyrings/microsoft-edge.gpg # add Edge repo echo &#39;deb [arch=amd64 signed-by=/usr/share/keyrings/microsoft-edge.gpg] https://packages.microsoft.com/repos/edge stable main&#39; | sudo tee /etc/apt/sources.list.d/microsoft-edge.list # update sudo apt update # install sudo apt install microsoft-edge-stable -y `,url:"/post/2023-02-01-microsoft-edge-linux-i386/",date:"2023-02-01"},"/post/2022-12-09-firefox-tab-less/":{title:"Firefox tab less",tags:[],content:`We can customize Firefox interface to hide the tabs bar :
First, we have to tell Firefox that we want to customize its interface.
In the address bar, type about:config and accept the risk message.
Then, look for a key named toolkit.legacyUserProfileCustomizations.stylesheets
Change its value to true.
Look for the profile folder
To show all profiles used in Firefox :
cat ~/.mozilla/firefox/profiles.ini The profil name has letters and numbers, generally you are looking for the one with the word default in it.
Go inside this folder et create a chrome folder :
mkdir chrome Inside this chrome folder, edit a new file named userChrome.css with this content :
#TabsToolbar { display: none !important; } Restart Firefox !
`,url:"/post/2022-12-09-firefox-tab-less/",date:"2022-12-09"},"/post/2022-11-06-sqlite-pure-go/":{title:"Sqlite Pure Go",tags:["technical","go","sqlite"],content:`Would it be possible to embed a database to avoid managing a MySQL or Postgres instance?
Even better, can this database be queried in SQL? I don&rsquo;t want to learn another way to query data.
The answer is obviously yes (otherwise I will not write this post) thanks to a pure Go implementation of Sqlite3.
So here is a quick introduction to this package !
How to install it? By adding a line in the import bloc :
import( ... _ &#34;modernc.org/sqlite&#34; ... ) Don&rsquo;t forget to run a go mod tidy to start solving the dependencies and automatically download the package.
How to use it ? Sqlite can store its data in a file, therefore we need to specify such file :
... db, err := sql.Open(&#34;sqlite&#34;, &#34;/tmp/testbase.db&#34;) ... How to request it? Exactly like with another db, using the sql package. For instance, for a simple query that returns rows of results:
rows, err := db.Query(&#34;SELECT * FROM userinfo&#34;) That&rsquo;s it !
This package is a good way to embed a database cheaply in its program while keeping the SQL paradigm.
`,url:"/post/2022-11-06-sqlite-pure-go/",date:"2022-11-06"},"/post/2022-08-02-experimenter-nebula-mesh-partie-2/":{title:"Experiment Nebula Mesh - Part 2",tags:["technical","linux"],content:`In my previous post, I used Nebula to setup a secured network between 2 virtual machines.
This time, I&rsquo;ll try to make a MySQL client and server communicate through a Nebula tunnel. And to make it a little bit more difficult, I&rsquo;ll use podman to run the client and the server in containers.
I begin by restarting the virtual machines :
vagrant up To restart Nebula automatically, I&rsquo;m using systemd. I generate the config file for Nebula service :
cat &lt;&lt;EOF &gt; nebula.service echo [Unit] Description=Nebula service [Service] Type=simple ExecStart=/opt/nebula/nebula -config /etc/nebula/config.yml Restart=on-failure [Install] WantedBy=multi-user.target EOF Then I push this file in the boxA temporary folder. I wish I could place it directly at his place at /etc/systemd/system but, to do that, I would need more privilege :
vagrant upload nebula.service /tmp/ boxA Now, inside boxA, I can &ldquo;sudo&rdquo; to place the config file in the apropriate folder :
vagrant ssh boxA -c &#34;sudo mv /tmp/nebula.service /etc/systemd/system/&#34; And, I activate this service so it starts at boot time.
vagrant ssh boxA -c &#34;sudo systemctl enable nebula&#34; I do the same for boxA, beginning by copying the config file :
vagrant upload nebula.service /tmp/ boxB Then I move it to the right place :
vagrant ssh boxB -c &#34;sudo mv /tmp/nebula.service /etc/systemd/system/&#34; Finaly I activate the service :
vagrant ssh boxB -c &#34;sudo systemctl enable nebula&#34; Now, it is Podman turn to be installed, first on boxA :
vagrant ssh boxA -c &#34;sudo apt install -y podman &amp;&amp; sudo reboot&#34; Then on boxB :
vagrant ssh boxB -c &#34;sudo apt install -y podman &amp;&amp; sudo reboot&#34; Just after Podman installation, I need to reboot the virtual machines, so podman can be launched as rootless (in the user session).
And because I configured Nebula as a systemd service, the tunnel will start as well.
I just need to wait that the 2 virtual machines finish to boot. I can see their status with vagrant status :
&gt; vagrant status Current machine states: boxA running (virtualbox) boxB running (virtualbox) I install the MySQL image and start the server onboxA :
vagrant ssh boxA -c &#34;podman run -p 192.168.168.100:3306:3306 --name=db --env MYSQL_ALLOW_EMPTY_PASSWORD=&#39;true&#39; -dt docker.io/library/mysql&#34; podman run : I use Podman without sudo (it&rsquo;s one big advantage on Docker) to start the container with MySQL.
-p 192.168.168.100:3306:3306 : I publish the MySQL port on the Nebula IP so I can access the server from another machine on this network.
&ndash;name=db : I name this container db so I can easily manipulate it later.
&ndash;env MYSQL_ALLOW_EMPTY_PASSWORD=&lsquo;true&rsquo; : I choose an empty password for this test. Of course, I would not do that in production.
-dt docker.io/library/mysql&quot;: at last I specify the MySQL image to use.
To check if the server is correctly started, I can use podman ps :
&gt; vagrant ssh boxA -c &#34;podman ps&#34; CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES d6c2625aafb4 docker.io/library/mysql mysqld 30 seconds ago Up 30 seconds ago 192.168.168.100:3306-&gt;3306/tcp db It is working !
So now, I try to access this server from boxB. I use nearly the same podman command as before, but this time I run the MySQL client :
If all is ok I will be prompted by MySQL :
&gt; vagrant ssh boxB -c &#34;podman run -ti --rm docker.io/library/mysql mysql -h192.168.168.100 -uroot&#34; Welcome to the MySQL monitor. Commands end with ; or \\g. Your MySQL connection id is 9 Server version: 8.0.29 MySQL Community Server - GPL Copyright (c) 2000, 2022, Oracle and/or its affiliates. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement. mysql&gt; show databases; +--------------------+ | Database | +--------------------+ | information_schema | | mysql | | performance_schema | | sys | +--------------------+ 4 rows in set (0.01 sec) mysql&gt; Hourra!
`,url:"/post/2022-08-02-experimenter-nebula-mesh-partie-2/",date:"2022-09-10"},"/post/2022-07-13-experimenter-nebula-mesh-partie-1/":{title:"Experiment Nebula Mesh - Part 1",tags:["technical","linux"],content:`Is it possible to use the public network, namely Internet, to make 2 machines communicate securely ? And if possible something easier to install and configure than OpenVpn ?
A few months ago, I heard about Nebula from Defined and wanted to test it : one single binary, some certificates and as secure as it can be, that sounded promising !
So here we are trying to simulate a mesh network between 2 virtual machines using Vagrant on my Ubuntu Linux distribution 20.04 with Virtualbox already installed.
Vagrant Vagrant from Hashicorp is the tool I use to manage virtual machines.
sudo apt install -y vagrant I configure Vagrant to have 2 virtual machines with Debian 11, named respectively boxA and boxB.
To make it simple, I use my host network interface to link the 2 virtual machines (so eth0 in my case) and use the available DHCP of my local network.
cat &lt;&lt;EOF &gt; Vagrantfile Vagrant.configure(&#34;2&#34;) do |config| config.vm.define &#34;boxA&#34; do |boxA| boxA.vm.box = &#34;generic/debian11&#34; boxA.vm.network &#34;public_network&#34;, bridge: &#34;eth0&#34; end config.vm.define &#34;boxB&#34; do |boxB| boxB.vm.box = &#34;generic/debian11&#34; boxB.vm.network &#34;public_network&#34;, bridge: &#34;eth0&#34; end end EOF Now I can launch the 2 machines with a single command :
vagrant up Nebula Installing nebula is as simple as downloading the binaries from github. I choose nebula-linux-amd64.tar.gz to comply to my configuration.
wget https://github.com/slackhq/nebula/releases/download/v1.6.0/nebula-linux-amd64.tar.gz After downloading, I uncompress the archive :
tar xf nebula-linux-amd64.tar.gz I now have 2 binaries : nebula and nebula-cert.
nebula will be copied on the 2 virtual machines. This is the main binary who will establish the bridge between the machines. nebula-cert will be used to generate all needed certificates : ./nebula-cert ca -name &#34;ACME, Inc&#34; ./nebula-cert sign -name &#34;boxA&#34; -ip &#34;192.168.168.100/24&#34; ./nebula-cert sign -name &#34;boxB&#34; -ip &#34;192.168.168.200/24&#34; I choose 192.168.168.* as my mesh network IP addresses : .100 for boxA and .200 for boxB.
The results of the commands are this list of files :
ca.crt ca.key boxA.crt boxA.key boxB.crt boxB.key To make it more simple to copy the files to the virtual machines, I create a folder per machine and copy the needed files :
mkdir boxA boxB mv boxA.* boxA &amp;&amp; mv boxB.* boxB Now I want to generate a Nebula configuration file, that will be common for the 2 machines. I need to get their IP addresses on my local network (those assigned by my DHCP server). I know that vagrant will use the eth1 interface inside the machines, so I use some magic shell script :
First on boxA :
boxAip=$(vagrant ssh boxA --no-tty -c &#34;ip address show eth1| grep &#39;inet &#39; | sed -e &#39;s/^.*inet //&#39; -e &#39;s/\\/.*$//&#39;&#34; | tr -d &#39;\\r&#39;) Then on boxB :
boxBip=$(vagrant ssh boxB --no-tty -c &#34;ip address show eth1| grep &#39;inet &#39; | sed -e &#39;s/^.*inet //&#39; -e &#39;s/\\/.*$//&#39;&#34; | tr -d &#39;\\r&#39;) The magic is that $boxAip and $boxBip variables now contain the wanted IPs. Let use them inside the Nebula config in the static_host_map section :
cat &lt;&lt;EOF &gt; config.yml pki: ca: /etc/nebula/ca.crt cert: /etc/nebula/host.crt key: /etc/nebula/host.key static_host_map: &#34;192.168.168.100&#34;: [&#34;$boxAip:4242&#34;] &#34;192.168.168.200&#34;: [&#34;$boxBip:4242&#34;] lighthouse: am_lighthouse: false listen: host: 0.0.0.0 port: 4242 punchy: punch: true tun: disabled: false dev: nebula1 drop_local_broadcast: false drop_multicast: false tx_queue: 500 mtu: 1300 routes: unsafe_routes: logging: level: info format: text firewall: conntrack: tcp_timeout: 12m udp_timeout: 3m default_timeout: 10m max_connections: 100000 outbound: - port: any proto: any host: any inbound: - port: any proto: any host: any EOF It&rsquo;s time to configure the machines. First, let send all the files to each machine :
vagrant upload ./boxA /tmp/ boxA vagrant upload ./boxB /tmp/ boxB vagrant upload ca.crt /tmp/ boxA vagrant upload ca.crt /tmp/ boxB vagrant upload config.yml /tmp/ boxA vagrant upload config.yml /tmp/ boxB vagrant upload nebula /tmp/ boxA vagrant upload nebula /tmp/ boxB Now I ssh in each machine and continue the configuration :
First, boxA :
vagrant ssh boxA Inside boxA, I move the files in their respective location and finally launch Nebula in the background before quitting boxA :
sudo mkdir /etc/nebula sudo mv /tmp/config.yml /etc/nebula/config.yml sudo mv /tmp/ca.crt /etc/nebula/ca.crt sudo mv /tmp/boxA.crt /etc/nebula/host.crt sudo mv /tmp/boxA.key /etc/nebula/host.key sudo mkdir /opt/nebula sudo mv /tmp/nebula /opt/nebula/ chmod +x /opt/nebula/nebula cd /opt/nebula sudo ./nebula -config /etc/nebula/config.yml &amp; exit Let&rsquo;s configure boxB,
vagrant ssh boxB Then I move all files and launch Nebula :
sudo mkdir /etc/nebula sudo mv /tmp/config.yml /etc/nebula/config.yml sudo mv /tmp/ca.crt /etc/nebula/ca.crt sudo mv /tmp/boxB.crt /etc/nebula/host.crt sudo mv /tmp/boxB.key /etc/nebula/host.key sudo mkdir /opt/nebula sudo mv /tmp/nebula /opt/nebula/ chmod +x /opt/nebula/nebula cd /opt/nebula sudo ./nebula -config /etc/nebula/config.yml &amp; exit Ok, at this moment, I have 2 virtual machines, with a Nebula network between them. How am I going to verify that it is really working ?
Well if I can ping boxB from boxA, it will mean that all is ok, so let&rsquo;s found out :
vagrant ssh boxA -c &#34;ping 192.168.168.200&#34; Hourra ! It is working. Of course, I can do it on the other side :
vagrant ssh boxB -c &#34;ping 192.168.168.100&#34; And that&rsquo;s all folks for part 1 !
Next, I&rsquo;ll try to use this configuration to execute a MySQL server on one machine, and access it from a MySQL client on the other machine. And to make it a little more difficult, I&rsquo;ll use Podman as the container engine to execute this client and server.
`,url:"/post/2022-07-13-experimenter-nebula-mesh-partie-1/",date:"2022-07-16"},"/post/2022-04-01-udev-webcam/":{title:"Udev Webcam",tags:["linux","howto"],content:`You can change the device link so your webcam will be always accessible at the same location /dev/video99. You can also persist some settings via the v4l-ctl command.
We will need the v4l2-ctl utility from the &ldquo;v4l-utils&rdquo; package :
sudo apt install v4l-utils First, let&rsquo;s get the vendor and product id from the lsusb command :
lsusb | grep -i Webcam # Bus 001 Device 014: ID 046d:082d Logitech, Inc. HD Pro Webcam C920 Information are located after the ID keyword as &ldquo;vendor:product&rdquo;. In this case, the idVendor=046d and the idProduct=082d.
Then edit an udev rules file as root (sudo) : /etc/udev/rules.d/99-webcam.rules
# -- always links to /dev/video99 SUBSYSTEM==&#34;video4linux&#34;, KERNELS==&#34;1-8&#34;, ATTRS{idVendor}==&#34;046d&#34;, ATTRS{idProduct}==&#34;082d&#34;, SYMLINK+=&#34;video99&#34; # -- set power line to 50HZ SUBSYSTEM==&#34;video4linux&#34;, KERNELS==&#34;1-8&#34;, ATTRS{idVendor}==&#34;046d&#34;, ATTRS{idProduct}==&#34;082d&#34;, RUN+=&#34;/usr/bin/v4l2-ctl -d $devnode -c power_line_frequency=1&#34; We need to target the &ldquo;video4linux&rdquo; subsystem because the &ldquo;usb&rdquo; is to high in the hierarchie.
Note: you can not change the webcam device name, that is why we set a new link.
You can finally restart udev without rebooting your linux :
sudo udevadm control --reload-rules &amp;&amp; sudo udevadm trigger `,url:"/post/2022-04-01-udev-webcam/",date:"2022-04-01"},"/post/2022-03-20-console-font-size/":{title:"Console Font Size",tags:["linux","console","howto"],content:`This days, with 4K monitors, the linux console is unreadable : the font is too small. So how can we scale the font size in the console after boot ?
Just modify the default console setup file for a bigger font :
&gt; cat /etc/default/console-setup ACTIVE_CONSOLES=&#34;/dev/tty[1-6]&#34; CHARMAP=&#34;UTF-8&#34; CODESET=&#34;guess&#34; FONTFACE=&#34;Terminus&#34; FONTSIZE=&#34;16x32&#34; FONT=&#39;Lat7-Terminus32x16&#39; `,url:"/post/2022-03-20-console-font-size/",date:"2022-03-29"},"/post/2020-11-08-appliquer-les-modifications-depuis-le-depot-git-parent/":{title:"Git Rebase From Upstream",tags:["git","howto"],content:`How to apply new commits in your forked repo from the parent (upstream) repo ?
If not already done, add a &ldquo;remote&rdquo; to the parent&rsquo;s repo like this :
git remote add parent https://github.com/project/name.git Then, fetch all commits from the parent&rsquo;s branch master (or any branch you like) :
git fetch parent master Now, apply all new commits to your repo :
git rebase parent/master You may have conflicts to solve if you&rsquo;ve done modifications on your repo. Solve them before going on.
Finally, push (and force) all your modifications :
git push --force origin master `,url:"/post/2020-11-08-appliquer-les-modifications-depuis-le-depot-git-parent/",date:"2020-11-08"},"/post/2020-10-14-horloge-geante-dans-le-terminal/":{title:"Big clock in a terminal",tags:["linux","shell","terminal"],content:"How to show a big clock on Linux without using an application or having a browser opened on time.is ?\nJust your terminal and a few commands and you&rsquo;ll get someting like this :\nIt depends on figlet tool to make large character on terminal so you need to install it :\nsudo apt install figlet Then type in your terminal :\nwhile true; do printf &#39;\\033[2J\\033[H&#39;; date +&#39;%T&#39; | figlet -ctW; sleep 1; done Quick explanation :\nwhile true; do ... ; done This is how we define an infinite loop. (Ctrl+C to interrupt it)\nprintf &#39;\\033[2J\\033[H&#39; Clear screen and fix the cursor position to top-left. For the record, the escape sequence \\033[2J clear the entire screen and \\033[H send the cursor at home. cf the Wikipedia page on ANSI escape code for other useful sequences.\ndate +&#39;%T&#39; Output the time as hours:minutes:seconds (shortcut to %H:%M:%S).\n| figlet -ctW Make large letters from the previous input. See the | befor it ? This means the previous command (date) is piped into figlet.\nsleep 1 Wait for 1 second before looping.\n",url:"/post/2020-10-14-horloge-geante-dans-le-terminal/",date:"2020-10-14"},"/post/2020-09-12-changer-le-nom-du-dossier-owncloud/":{title:"Change local ownCloud sync directory",tags:["linux","owncloud"],content:"To change the name of ownCloud main folder, there is a little trick you can do on Linux (may work as well on other platforms).\nFirst, close the ownCloud application on your desktop : commonly, right click the systray icon and quit ownCloud. This avoid any conflict when renaming the folder.\nNow, you can rename your local folder. For example :\nmv ~/owncloud ~/docs Open your ownCloud configuration file : location depends on the platform (cf ownCloud docs for more infos). On my Linux desktop, I did :\nvi ~/.local/share/data/ownCloud/owncloud.cfg Then, look for a line with &ldquo;localPath&rdquo; inside. Someting like :\n0\\Folders\\1\\localPath=/home/user/owncloud/ Now, update the folder location to your needs. For example :\n0\\Folders\\1\\localPath=/home/user/docs/ Restart your ownCloud app and voilà !\n",url:"/post/2020-09-12-changer-le-nom-du-dossier-owncloud/",date:"2020-09-12"},"/post/2019-12-02-git-local/":{title:"Local git",tags:["dev","git","howto"],content:`Define a repo somewhere in your file system with a bare init
mkdir -p /somewhere/repo/test_project cd /somewhere/repo/test_project git init --bare Now create a local folder for your work with init only
mkdir -p /somewhereelse/work/test_project cd /somewhereelse/work/test_project git init Attach your working folder to the repo
git remote add origin file:///somewhere/repo/test_project Create your files and commit it
echo &#34;#first commit&#34; &gt; README.md git add README.md git commit Now push to origin and set upstream
git push --set-upstream origin master The end.
`,url:"/post/2019-12-02-git-local/",date:"2019-12-02"},"/post/2019-11-25-astuce-mysql-prompt-personnalise/":{title:"Mysql prompt tip",tags:["howto","mysql","prompt"],content:`You can change the mysql prompt client so you know where you are.
Very usefull when you manage a lot of mysql databases and you forget which one :-)
For example, if I&rsquo;m working on the FooBar projet, I can use this prompt :
mysql --prompt=&#34;@FooBar&gt; &#34; Then I&rsquo;ll have something like that :
Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement. @FooBar&gt; show databases; Neat ! Never lost in databases anymore :-D
`,url:"/post/2019-11-25-astuce-mysql-prompt-personnalise/",date:"2019-11-25"},"/post/2019-11-18-disable-tabs-in-firefox/":{title:"Disable tabs in Firefox",tags:["dwm","Firefox","howto","linux"],content:`If you use a tiled window manager like me, Suckless DWM for example, and have Firefox as your browser, you may be interested by not showing the tabs.
It&rsquo;s nearly easy not to show tabs in Firefox : change a configuration and add a custom css. This is how I do it.
Configuration Type about:config in the address bar and press Enter. If you get a warning about security, click the button accepting the risk. Type userprof in the search bar_._ A line with toolkit.legacyUserProfileCustomizations.stylesheets appears. Double-click this line to switch the value from false to true. Close the window I also changed the preference to not open new link in a tab but in a new window.
Custom css In your home directory, there is an hidden folder called &ldquo;.mozilla/firefox&rdquo;. Change directory to it :
cd ~/.mozilla/firefox In that folder, look for what seems your profile folder. For example, mine is like qtre86s9x.default. Enter in this folder :
cd qtre86s9x.default Now we create a special folder named chrome :
mkdir chrome And we create a special file in it named userChrome.css containing :
#TabsToolbar {visibility: collapse !important;} Quit and relaunch your Firefox : no tabs !
`,url:"/post/2019-11-18-disable-tabs-in-firefox/",date:"2019-11-18"},"/post/2019-10-27-make-your-ubuntu-lts-kernel-up-to-date/":{title:"Make your ubuntu LTS kernel up to date",tags:["kernel","linux","ubuntu"],content:`Install LTS Hardware Enablement Stack
sudo apt-get install --install-recommends linux-generic-hwe-18.04 xserver-xorg-hwe-18.04 Clean
sudo apt purge --autoremove Reboot to load new kernel
reboot After boot, check your new kernel version
uname -a `,url:"/post/2019-10-27-make-your-ubuntu-lts-kernel-up-to-date/",date:"2019-10-27"},"/post/2018-11-08-installer-un-iso-sur-une-cle-usb-dans-une-console-linux/":{title:"Install iso on USB key using #Linux console only",tags:["console","howto","linux","usb"],content:`How to flash any iso (think about your favorite distro) on an USB key without graphical IHM ?
sudo dd if=/path/to/image.iso of=/dev/sda status=progress &ldquo;/path/to/image.iso&rdquo; is the path to the ISO file /dev/sda is your USB key device (see below to get yours) : note that it is the whole device, not a partition (e.g. /dev/sda and not /dev/sda1) status=progress show flashing progression How to know wich device to use ?
Before inserting the key, type in your terminal :
dmesg -Tw Everything happening on your Linux is traced on screen. Now, insert your key and check for this sort of lines :
[ven. janv. 26 15:11:34 2018] sda: sda1 [ven. janv. 26 15:11:34 2018] sd 2:0:0:0: [sda] Attached SCSI removable disk Yours may be sdb or sdc, etc&hellip; Take the good one and place it in the command above :-)
`,url:"/post/2018-11-08-installer-un-iso-sur-une-cle-usb-dans-une-console-linux/",date:"2018-11-08"},"/post/2018-09-07-forcer-le-nom-de-linterface-wifi-sous-ubuntu-18-04/":{title:"Force #wifi interface name on #Ubuntu 18.04",tags:["console","howto","linux","network","shell","ubuntu","udev","wifi"],content:`Using Udev, you can change the wifi interface name.
First, you need to get the mac address.
$ ip link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: **wlp1s0**: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DORMANT group default qlen 1000 link/ether **9c:b6:d0:8a:71:11** brd ff:ff:ff:ff:ff:ff My wifi interface is name wlp1s0 and its mac address is just after the keyword &ldquo;link/ether&rdquo; : 9c:b6:d0:8a:71:11.
Now, create or update a udev rules file in /etc/udev/rules.d containing something like :
$ cat /etc/udev/rules.d/60-persistent-net.rules SUBSYSTEM==&#34;net&#34;, ACTION==&#34;add&#34;, DRIVERS==&#34;?*&#34;, ATTR{address}==&#34;**9c:b6:d0:8a:71:11**&#34;, ATTR{type}==&#34;1&#34;, NAME=&#34;**wlan0**&#34; You certainly need root access. Just change the address and choose the name you want, then reboot.
Check if all is ok with :
$ ip link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: **wlan0**: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DORMANT group default qlen 1000 link/ether 9c:b6:d0:8a:71:11 brd ff:ff:ff:ff:ff:ff `,url:"/post/2018-09-07-forcer-le-nom-de-linterface-wifi-sous-ubuntu-18-04/",date:"2018-09-07"},"/post/2018-03-27-vs-code-loses-go-autocompletion-on-linux/":{title:"VS Code loses Go autocompletion on Linux",tags:["bug","dev","go","linux"],content:`On my Linux, just after upgrading Go to version 1.9, I lost autompletion functionality in VS Code.
:vscode_completion_not_working
This tip did not work for me.
So let&rsquo;s try to debug it.
First, we close the auto-completion server (see github.com/nsf/gocode ) :
gocode close killall gocode Then we relaunch it as a server in debug mode inside a console :
gocode -debug -s So now, we can see what&rsquo;s happening.
OK, time to try an auto-completion inside VS Code.
Bingo ! We got some useful log :
2018/03/26 23:27:32 Import path &#34;net/http&#34; was not resolved 2018/03/26 23:27:32 Gocode&#39;s build context is: 2018/03/26 23:27:32 GOROOT: /usr/local/go 2018/03/26 23:27:32 GOPATH: /home/barim 2018/03/26 23:27:32 GOOS: linux 2018/03/26 23:27:32 GOARCH: amd64 2018/03/26 23:27:32 BzlProjectRoot: &#34;&#34; 2018/03/26 23:27:32 GBProjectRoot: &#34;&#34; 2018/03/26 23:27:32 lib-path: &#34;&#34; 2018/03/26 23:27:32 Error parsing input file (inner block): 2018/03/26 23:27:32 3:6: expected selector or type assertion, found &#39;;&#39; ... Weird, my GOROOT isn&rsquo;t at /usr/local/go but at /usr/lib/go.
It seems like gocode doesn&rsquo;t care about my env and arbitrary choose to look inside this folder.
Ok, let&rsquo;s trick him with a symlink :
sudo ln -s /usr/lib/go /usr/local/go Now it works !
`,url:"/post/2018-03-27-vs-code-loses-go-autocompletion-on-linux/",date:"2018-03-27"},"/post/2018-01-26-minimal-docker-golang-et-le-televersement-multipart/":{title:"Docker from scratch, Go and Multipart upload",tags:["go","docker"],content:`
To reduce docker container size we can built the image from scratch instead of using bloated images, like debian or worse ubuntu.
But to put a golang binary in it you have to take care of some important stuff. We&rsquo;ll see briefly how to do it. For more details, see Building Minimal Docker Containers For Go Applications
Compile staticaly your go program :
CGO_ENABLED=0 GOARCH=amd64 GOOS=linux go build -a -installsuffix cgo -o server Your Dockerfile looks like this :
FROM scratch ADD static /static ADD server /server CMD /server But if you add some upload code in your program, this won&rsquo;t work. The upload needs the tmp folder for big files that are sent in multipart form.
Below, the code in the os.file_unix Go package :
// TempDir returns the default directory to use for temporary files. func TempDir() string { dir := Getenv(&#34;TMPDIR&#34;) if dir == &#34;&#34; { if runtime.GOOS == &#34;android&#34; { dir = &#34;/data/local/tmp&#34; } else { dir = &#34;/tmp&#34; } } return dir } So, as we are on linux, dir = &ldquo;/tmp&rdquo; is our usual suspect.
But the scratch docker does not contain a tmp folder. This was a hard bug to catch but so easy to fix, just changing the Docker file :
FROM scratch VOLUME /tmp ADD static /static ADD server /server Now link the container /tmp to the host tmp :
docker run -P -v /tmp:/tmp your_image That&rsquo;s it ! Enjoy a fully functionnal minimal docker golang application !
`,url:"/post/2018-01-26-minimal-docker-golang-et-le-televersement-multipart/",date:"2018-01-26"},"/post/2018-01-10-samba-public-share/":{title:"Samba public share",tags:["linux"],content:`How to configure a Debian based Linux distribution to share a folder with anyone on the network, with read and write access ?
Create the public directory
mkdir /media/public &amp;&amp; chmod 777 /media/public Edit the samba file configuration
vi /etc/samba/smb.conf Add the code below at the end
[public] comment = Public Folder path = /media/public guest ok = yes public = yes writable = yes printable = no create mask = 777 Restart samba
sudo service smbd restart `,url:"/post/2018-01-10-samba-public-share/",date:"2018-01-10"},"/post/2017-03-28-convert-pdf-to-png-with-enough-resolution/":{title:"Convert PDF to PNG with enough resolution",tags:["console","howto","ImageMagick","linux","shell"],content:`
As &lsquo;man convert&rsquo; states :
The convert program is a member of the ImageMagick suite of tools. Use it to convert between image formats as well as resize an image, blur, crop, despeckle, dither, draw on, flip, join, re-sample, and much more.
I use it to convert a pdf file to png picture with enough pixel density for the screen. This is the command :
convert -density 100 source.pdf target.png `,url:"/post/2017-03-28-convert-pdf-to-png-with-enough-resolution/",date:"2017-03-28"},"/post/2017-02-20-dont-forget-master-infos-in-your-mysql-dump/":{title:"Don't forget master infos in your MySQL dump",tags:["dev","howto","mysql"],content:`
I tried to resync a slave MySQL after it disconnected from the master. But the binary log was already deleted on master, so the only solution was to restore from the last backup. To avoid lock tables on the master and remember the binary log name and position to put them on the slave configuration, there is a tip to take care of all that : the &ldquo;- master-data&rdquo; option in mysqldump.
mysldump --master-data -l -q yourbase &gt; backup.sql This will add all information needed on the slave side : just stop the slave before restoring the dump, and restart it after.
mysql yourbase -e &quot;stop slave&quot; mysql yourbase &lt; backup.sql mysql yourbase -e &quot;start slave&quot; mysql yourbase -e &quot;show slave status \\G&quot; `,url:"/post/2017-02-20-dont-forget-master-infos-in-your-mysql-dump/",date:"2017-02-20"},"/post/2017-01-04-red-programming-language-eve-style-clock-demo-in-red-livecoded/":{title:"Eve-style clock demo in Red, livecoded!",tags:[],content:`Red is a next-gen programming language, strongly inspired by REBOL.
Demo
Main features are:
Homoiconic (Red is its own meta-language and own ** data-format **) Functional, imperative, ** reactive ** and symbolic programming Prototype-based object support **Gradual and multi-**typing ** Macros ** system Rich set of built-in datatypes (50+) Both statically and JIT- compiled to native code Cross-compilation right . Produces executables of less than 1MB, with no dependencies. Concurrency and parallelism strong support (actors, parallel collections) Low-level system programming abilities through the built-in Red/System DSL Powerful **PEG DSL **Cross-platform native drawing DSL . Bridging to the JVM High-level scripting and REPL console included Highly embeddable Low memory footprint, garbage collected ** Single-file ** (~1MB) contains whole toolchain, standard library and REPL. No install, no setup Fun guaranteed. ;-) Source : Red Programming Language: Eve-style clock demo in Red, livecoded!
`,url:"/post/2017-01-04-red-programming-language-eve-style-clock-demo-in-red-livecoded/",date:"2017-01-04"},"/post/2017-01-04-consul-0-7-1-hashicorp/":{title:"Consul 0.7.1 | HashiCorp",tags:[],content:` Consul is a critical infrastructure service for organizations that rely on it for service discovery, key/value storage, and health checks.
Source : Consul 0.7.1 | HashiCorp
`,url:"/post/2017-01-04-consul-0-7-1-hashicorp/",date:"2017-01-04"},"/post/2017-01-04-docker-build-ship-and-run-any-app-anywhere/":{title:"Docker -  Build, Ship, and Run Any App, Anywhere",tags:[],content:` Docker is an open platform for developers and sysadmins to build, ship, and run distributed applications, whether on laptops, data center VMs, or the cloud.
Source : Docker - Build, Ship, and Run Any App, Anywhere
`,url:"/post/2017-01-04-docker-build-ship-and-run-any-app-anywhere/",date:"2017-01-04"},"/post/2016-10-12-mysql-import-from-csv/":{title:"MySQL import from csv",tags:["dev","howto","mysql"],content:"To import a local CSV file into MySQL, use the syntax below :\nLOAD DATA LOW_PRIORITY LOCAL INFILE '/path/tofile.csv' INTO TABLE database.table FIELDS TERMINATED BY ';' OPTIONALLY ENCLOSED BY '&quot;' ESCAPED BY '&quot;' LINES TERMINATED BY '\\n' IGNORE 1 LINES (`field1`,`field2`,...) ",url:"/post/2016-10-12-mysql-import-from-csv/",date:"2016-10-12"},"/post/2016-10-12-mysql-export-to-csv/":{title:"MySQL export to csv",tags:["dev","howto","mysql"],content:`To export a mysql results in CSV format, use the syntax below :
SELECT field1, field2, ... FROM table WHERE condition INTO OUTFILE '/tmp/toto.csv' FIELDS TERMINATED BY ';' ENCLOSED BY '&quot;' LINES TERMINATED BY '\\n' ; `,url:"/post/2016-10-12-mysql-export-to-csv/",date:"2016-10-12"},"/post/2016-10-03-cheyenne-server-and-post-size-limit/":{title:"Cheyenne server and POST size limit",tags:["cheyenne"],content:`By default, in Cheyenne, the header size limit for a post request is 102'400.
If you want to ajust this limit you can define the post-mem-limit parameter in the global context or in a specific webapp.
For example, to double the initial limit in the httpd.cfg, :
... default [ root-dir %./www/ default [%index.html %index.rsp] post-mem-limit 408'800 ] ... `,url:"/post/2016-10-03-cheyenne-server-and-post-size-limit/",date:"2016-10-03"},"/post/2016-08-29-demarrer-linux-sur-la-console-texte/":{title:"Boot Linux in text console",tags:["linux"],content:`Get rid of graphic boot on Linux with a few modifications in grub configuration :
# edit your grub config sudo vi /etc/default/grub # remove splash, quiet, ... from GRUB_CMDLINE_LINUX_DEFAULT GRUB_CMDLINE_LINUX_DEFAULT=&#34;text&#34; # save the file and update grub sudo update-grub `,url:"/post/2016-08-29-demarrer-linux-sur-la-console-texte/",date:"2016-08-29"},"/post/2016-06-07-french-git-log/":{title:"French Git Log",tags:["git"],content:`Git log in colors.
git log --pretty=&#39;format:%Cblue%h%Creset %ad %Cred%&lt;(8,trunc)%an%Creset%Cgreen%d%Creset %s&#39; --date=short Shows how to use pretty format in Git with colors and fixed with columns (trunc) :
%Cblue &hellip; %Creset begin and end a colored sequence (here in blue, also possible : red and green) %h hash short format %ad author date (short version with the - date=short git argument) %&lt;(8,trunc) the next item will take 8 positions with spaces at right if necessary and truncated if longer %an author name %d ref names (branch, tag, &hellip;) %s subject (ie the commit comment) `,url:"/post/2016-06-07-french-git-log/",date:"2016-06-07"},"/post/2016-05-30-mysql-client-ne-pas-afficher-le-nom-des-colonnes-et-les-tirets-du-tableau/":{title:"mysql client : don't show columns names and grid",tags:[],content:`Default mysql client behaviour is to show column names and grid when returning results but how to get rid of this decorations ? +-------+ | pv_id | +-------+ | 1 | | 2 | | 3 | +-------+ To keep only the data results without the decorations, use the -sN option on the mysql client like this :
mysql -sN ... and you&rsquo;ll get :
1 2 3 Perfect for playing with the shell !
`,url:"/post/2016-05-30-mysql-client-ne-pas-afficher-le-nom-des-colonnes-et-les-tirets-du-tableau/",date:"2016-05-30"},"/post/2016-05-23-autoriser-les-dates-invalides-dans-mysql/":{title:"Allow invalid date in MySQL",tags:["dev","mysql"],content:`Just in case you absolutely have to insert a date in MySQL that does&rsquo;nt exist, eg 2014-02-30, you can run MySQL server in a special mode that authorizes such dates :
mysqld --sql-mode=&#34;ALLOW_INVALID_DATES&#34; MySQL will only check that the month is in the range from 1 to 12 and the day is in the range from 1 to 31.
see Mysql DOC `,url:"/post/2016-05-23-autoriser-les-dates-invalides-dans-mysql/",date:"2016-05-23"},"/post/2015-10-27-screencast-with-byzance-on-linux/":{title:"screencast with byzance on linux",tags:[],content:` byzanz-record -c - duration=60 - x=80 - y=310 - width=800 - height=600 out.gif
`,url:"/post/2015-10-27-screencast-with-byzance-on-linux/",date:"2015-10-27"},"/post/2015-09-07-not-permitted-to-mount-disk/":{title:"Not permitted to mount disk ?",tags:[],content:`A few days ago, I started to have a very disturbing &ldquo;Not permitted&rdquo; message when trying to mount a usb disk from Thunar . The only way I found was to pmount the disk : not as intuitive as just clicking the disk on Thunar.
But after some googling, I found where was the real problem : udisk, who is responsible of mounting disks, uses polkit to know if I have the right to mount, or not, external disk. So, if you have the same problem, follow this steps :
sudo nano /usr/share/polkit-1/actions/org.freedesktop.udisks2.policy (use your favorite text editor in place of nano)
Then, look for the section with &ldquo;udisks2.filesystem-mount&rdquo;, inside you&rsquo;ll have a &ldquo;defaults&rdquo; section with interesting stuff :
&lt;defaults&gt; &lt;allow_any&gt;auth_admin&lt;/allow_any&gt; &lt;allow_inactive&gt;auth_admin&lt;/allow_inactive&gt; &lt;allow_active&gt;auth_admin_keep&lt;/allow_active&gt; &lt;/defaults&gt; Now, replace all &ldquo;auth_admin*&rdquo; by &ldquo;yes&rdquo; to give access for every user, like this :
&lt;defaults&gt; &lt;allow_any&gt;yes&lt;/allow_any&gt; &lt;allow_inactive&gt;yes&lt;/allow_inactive&gt; &lt;allow_active&gt;yes&lt;/allow_active&gt; &lt;/defaults&gt; Save your modifications. Forget this annoying message !
`,url:"/post/2015-09-07-not-permitted-to-mount-disk/",date:"2015-09-07"},"/post/2015-08-31-how-to-forward-outlook-emails-with-vb-script/":{title:"How To Forward Outlook Emails With VB Script",tags:["windows"],content:" In Windows, create a certificate via Start &gt; All Programs &gt; Microsoft Office &gt; Microsoft Office Tools &gt; Digital Certificate for VBA Projects In Microsoft Outlook, open the VB editor and copy/paste the code below Replace your@email.here and save Click on Tools &gt; Digital Signature Click on [Choose] and select your certificate Click OK, then save and close the VB editor Create the Outlook rule with [run a script] as action and select your macro That&rsquo;s all folks ! Private Const TO_EMAIL As String = &quot;your@email.here&quot; Sub ForwardAllEmail(theMail As MailItem) On Error GoTo EndSub Dim mailObj As Outlook.MailItem Dim item As Outlook.MailItem Set mailObj = Application.Session.GetItemFromID(theMail.EntryID) Set item = mailObj.Forward item.Recipients.Add (TO_EMAIL) item.Send Set item = Nothing ' Set variables to null to prevent memory leaks Set mailObj = Nothing Exit Sub EndSub: MsgBox &quot;Error: &quot; &amp; Err.Description End Sub ",url:"/post/2015-08-31-how-to-forward-outlook-emails-with-vb-script/",date:"2015-08-31"},"/post/2015-08-24-invisible-code-sticks-forever/":{title:"Invisible code sticks forever",tags:["Javascript","web"],content:`A few months ago, I read an article about brain training by learning a new language : very interesting story about William Alexander who failed to learn french but strenghten his brain trying to.
But this is not the subject of this post. As I finished to read the article, I tried to reach William Alexander&rsquo;s website and was redirected to a crappy chineese online store. I immediately thought he was hacked and after reading the page source code, I find this piece of script :
&lt;script type=&#34;text/javascript&#34;&gt; var language = navigator.browserLanguage?navigator.browserLanguage:navigator.language; if (language.indexOf(&#39;en&#39;) &gt; -1) document.location.href = &#39;javascript:void(0)&#39;; else document.location.href = &#39;http://www.line-kopi.com&#39;; &lt;/script&gt; What&rsquo;s going on here ? The code checks the browser language and redirects to the fraudulent site only if the language is anything other than english ! So, every time some non-english dude complains to William about this problem, William tries the site and accesses it successfully and just forget about it&hellip; The malicious code can stay here for months, with just a little trick but very annoying result !
And for the record, I, of course, alerted William and he removed the malicious code &hellip;
`,url:"/post/2015-08-24-invisible-code-sticks-forever/",date:"2015-08-24"},"/post/2015-07-08-tmux-for-the-impatient/":{title:"Tmux for the impatient",tags:["linux","tmux"],content:`Key shortcuts
tmux Create a new session (the first time) tmux a Attach to an existing session Ctrl+b d Detach Ctrl+b PgUp/PgDown Scroll (quit with q) also can use mouse after first page up or down (see tips below to activate normal mouse scrolling) Ctrl+b [ Copy mode (quit with q) Ctrl+b &quot; Split horizontally Ctrl+b % Split vertically Ctrl+b arrow key Switch pane Hold Ctrl+b + arrow keys Resize pane Ctrl+b + z Toggle zoom in pane Tips Copy/pasting sudo apt-get install xclip Install xclip so buffer copied inside tmux are also available to X Shift + mouse selection Select text to copy Ctrl + Shift + C Copy Ctrl + Shift + V Paste Use the mouse for scrolling set -g mouse on put this command in ~/.tmux.conf `,url:"/post/2015-07-08-tmux-for-the-impatient/",date:"2015-07-08"},"/post/2015-05-17-wireless-auto-configuration-with-guessnet-on-linux/":{title:"Wireless auto configuration with guessnet on Linux",tags:["howto","linux","ubuntu"],content:`
Assume we have access to the wifi at work and at home. How can I configure my laptop to automatically connect to the right network without using a graphical network manager ? Welcome guessnet !
Install the guessnet package :
sudo apt-get install guessnet Edit your /etc/network/interface :
auto wlan0 mapping wlan0 script /usr/sbin/guessnet-ifupdown map home work map timeout: 9 map init-time: 9 map verbose: true map debug: false	iface home inet dhcp wpa-ssid &#34;&lt;em&gt;homessid&lt;/em&gt;&#34; wpa-psk &#34;&lt;em&gt;homepassword&lt;/em&gt;&#34; test wireless essid &lt;em&gt;HOMESSID&lt;/em&gt; iface work inet dhcp wpa-ssid &#34;&lt;em&gt;workssid&lt;/em&gt;&#34; wpa-psk &#34;&lt;em&gt;workpassword&lt;/em&gt;&#34; test wireless essid &lt;em&gt;WORKESSID&lt;/em&gt; (variables to adapt to your configuration in italic)
We define the &lsquo;home&rsquo; and &lsquo;work&rsquo; networks as usual with the iface command. The 2 differences are :
we use the virtual interface &ldquo;work&rdquo; and &ldquo;home&rdquo; instead of the real interface &ldquo;wlan0&rdquo;. we add a test line that checks the ssid : this is used by guessnet to guess the right network The mapping block uses an external script (here guessnet) with prudent parameters
the &lsquo;map home work&rsquo; tells guessnet to only check this 2 networks the init-time wait a little before configuring, to let the drive enough time That&rsquo;s it !
`,url:"/post/2015-05-17-wireless-auto-configuration-with-guessnet-on-linux/",date:"2015-05-17"},"/post/2015-01-14-if-ssh-client-disconnect-and-freeze/":{title:"If ssh client disconnect and freeze",tags:[],content:`Add in your ~/.ssh/config :
Host * ServerAliveInterval 240 src = superuser.com
`,url:"/post/2015-01-14-if-ssh-client-disconnect-and-freeze/",date:"2015-01-14"},"/post/2015-01-07-git-delete-remote-branch/":{title:"Git delete remote branch/tag",tags:["dev","git"],content:`As of Git v1.7.0, you can delete a remote branch using :
git push origin --delete &lt;branchName&gt; And you can do exactly the same with a tag
git push origin --delete &lt;tagName&gt; Sources :
for branch stackoverflow.com for tag W3docs `,url:"/post/2015-01-07-git-delete-remote-branch/",date:"2015-01-07"},"/post/2014-12-26-horizontal-rule-in-zsh-prompt/":{title:"Horizontal rule in zsh prompt",tags:["linux"],content:"\nPut in your ~/.zshrc :\nPS1=$&#39;%U${(r:$COLUMNS:: :)}%u&#39;$PS1 _src = superuser.com _\n",url:"/post/2014-12-26-horizontal-rule-in-zsh-prompt/",date:"2014-12-26"},"/post/2014-12-05-increase-wordpress-max-file-upload-size/":{title:"Increase wordpress max file upload size",tags:["wordpress"],content:`On Ubuntu/Debian distro, edit the /etc/wordpress/htaccess and add this lines :
php_value upload_max_filesize 50M php_value post_max_size 50M php_value memory_limit 50M `,url:"/post/2014-12-05-increase-wordpress-max-file-upload-size/",date:"2014-12-05"},"/post/2014-12-03-substitute-a-text-only-in-files-where-it-appears/":{title:"Substitute a text only in files where it appears",tags:["linux","shell"],content:"For example, to substitute foo with bar\nfor f in `grep -lR foo`; do echo -n &quot;&gt;&gt; $f&quot;; sed 's/foo/bar/g' $f &gt; $f.2; mv $f.2 $f; echo &quot; done.&quot;; done for loops on all files containing the text “foo”, grep -l only show the file name with corresponding text inside. sed replace foo with bar in all file mv save the modification (delete if you don’t want to overwrite the original files, the modified files is named with .2 at the end) ",url:"/post/2014-12-03-substitute-a-text-only-in-files-where-it-appears/",date:"2014-12-03"},"/post/2014-12-03-convert-multiple-files-to-utf8-using-vim/":{title:"Convert multiple files to utf8 using vim",tags:["linux","shell","vim"],content:`The fastest and more efficient way to batch multiple files encoding conversion :
vim +&#34;argdo se fileencoding=utf-8 | w | bnext&#34; +&#34;q&#34; \` find . -type f -name &#34;*.rsp&#34; +&ldquo;argdo&rdquo; : execute the following vim commands for each file (filencode, save and next buffer)
+&ldquo;q&rdquo; : quit after last one
find : get all files with corresponding name
`,url:"/post/2014-12-03-convert-multiple-files-to-utf8-using-vim/",date:"2014-12-03"},"/post/2014-11-28-git-stop-tracking-files/":{title:"GIT -  stop tracking files",tags:["dev","git"],content:`If you have some files that you need to have in your repo but don’t need to have updates, git allows it :
git update-index --skip-worktree &lt;FILES&gt; Then a “git status” won’t show those files until you do :
git update-index --no-skip-worktree &lt;FILES&gt; To show the skipped files :
git ls-files -v . | grep ^S skip-worktree is a better solution than - assume-unchanged because status will not get lost once an upstream change is pulled. source : http://stackoverflow.com/a/39776107/3181414
`,url:"/post/2014-11-28-git-stop-tracking-files/",date:"2014-11-28"},"/post/2014-11-27-zsh-nohup-and-background-process-that-lasts/":{title:"ZSH, nohup and background process that lasts...",tags:["linux"],content:`When I switched to ZSH, and let BASH behind, I missed some behaviour : one of them was the ability to quit my terminal while some jobs are still alive.
In ZSH, I get a message like this if I exit with running jobs :
zsh you have running jobs If I exit again, my jobs are killed. But zsh accept some useful option to overide this :
setopt NO_HUP setopt NO_CHECK_JOBS First one is for not killing process after terminal exit, and second one is for not warning you about it.
`,url:"/post/2014-11-27-zsh-nohup-and-background-process-that-lasts/",date:"2014-11-27"},"/post/2014-11-24-install-minimum-php-no-apache/":{title:"Install minimum php (no apache)",tags:[],content:`To code with php, no need to install apache and other dependencies, especially as php has a builtin web server.
apt-get install php5-cli Then use
php -S localhost:4444 and you&rsquo;re done.
`,url:"/post/2014-11-24-install-minimum-php-no-apache/",date:"2014-11-24"},"/post/2014-11-07-get-rid-of-the-desktop-icon-in-nautilus-3-10-side-bar/":{title:"Get rid of the Desktop icon in Nautilus 3.10 side bar",tags:[],content:`Add in ~/.config/gtk-3.0/settings.ini
gtk-shell-shows-desktop=0 Remove all entries in ~/.config/user-dirs.dirs but let this one :
XDG_DESKTOP_DIR=&#34;$HOME/&#34; If you remove this too, each time nautilus is launched, it will create a ~/Desktop folder.
Remove folder Desktop if it exists
`,url:"/post/2014-11-07-get-rid-of-the-desktop-icon-in-nautilus-3-10-side-bar/",date:"2014-11-07"},"/post/2014-07-17-stretched-background-with-ie8/":{title:"Stretched background with IE8",tags:[],content:"Side note : Microsoft has dropped support for IE8 last april 2014 :-(\nThere are still some clients that want their webapp to work perfectly on IE8. They can&rsquo;t make all their clients move to the newest browsers. But some times, it can drive you nuts to achieve simple things. Our problem was about a background image in a div that doesn&rsquo;t want to strech. Just some css will do it for all other browsers, but not for IE8. It needs a special &ldquo;filter&rdquo; like this :\n.logondesktop { filter:progid:DXImageTransform.Microsoft.AlphaImageLoader( enabled=true, src=&#39;http://lorempixel.com/1200/800/&#39;, sizingMethod=&#39;scale&#39;);} _ More info on this filter at Microsoft _\nHere we add a nice background (thanks to Lorem Pixel ) to the &rsquo;logondesktop&rsquo; element. Ok, that made the trick. But, wait ?!? What happen to my links and form input inside the div ? There are no more clickable !!!\nDamned IE8, another bug&hellip; Now, dig again to find a fix. Hopefully, it was easy. The div content must be relatively positioned. So the html looks like\n&lt;div class=&#34;logondesktop&#34;&gt; &lt;div class=&#34;logon&#34;&gt; &lt;a href=&#34;#&#34;&gt;CLICK ME IF YOU DARE!&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; ```sh And the css to fix the IE8 bug : ```css .logon { position: relative; } See an example here (open with IE8) : http://fiddle.jshell.net/hamdouni/w4BBE/show\n",url:"/post/2014-07-17-stretched-background-with-ie8/",date:"2014-07-17"},"/post/2014-06-30-speech-tasks-une-webapp-avec-reconnaissance-vocale/":{title:"Speech Tasks : a voice driven todo webapp",tags:["go","Javascript"],content:`With the Go http server. (By the way, I love opensource community !)
Try the demo !
See the code !
Source; tutorial to deploy go app on Heroku
`,url:"/post/2014-06-30-speech-tasks-une-webapp-avec-reconnaissance-vocale/",date:"2014-06-30"},"/post/2014-06-18-usb-disk-et-policykit/":{title:"usb mount and policykit",tags:["linux","dwm"],content:`DWM is my tiled window manager. It&rsquo;s fast, flexible and fun. My linux desktop is up and running after a few seconds&hellip; (ok, thanks also to the ssd :-) ).
But, after I upgraded to Ubuntu 14.04, I&rsquo;ve lost the ability to mount my usb disks with the file manager (same problem with Nautilus or Thunar). I&rsquo;m getting this frustrating &ldquo;not authorized&rdquo; message.
My work around was to &lsquo;pmount&rsquo; the disk. It works but I need to search for the right device before, with dmesg, then provide the right syntax. Not so fun.
After digging a while, I found out that authorizations are managed with policykit. So after reading man page after man page, posts after posts, I found a way to easily mount my usb disks in my file manager.
Just edit a new policykit config file :
sudo nano /etc/polkit-1/localauthority/50-local.d/55-myconf.pkla The number and the .pkla extension are mandatory to respect. The name &lsquo;myconf&rsquo; is as you will.
Inside this file, insert those lines :
[Dealing with disks] Identity=unix-group:plugdev Action=org.freedesktop.udisks2.filesystem-mount;org.freedesktop.udisks2.eject-media;org.freedesktop.ud$ ResultAny=yes ResultInactive=yes ResultActive=yes Now, we have to restart DBUS as it&rsquo;s the service that launch the polkitd daemon
sudo restart dbus If you launch, as I do, gnome-settings-daemon manually, you need to relaunch it after dbus
gnome-settings-daemon -r &amp; That&rsquo;s it ! Plug an usb drive and use your file manager to browse it. No more &rsquo;not authorized&rsquo; message !
`,url:"/post/2014-06-18-usb-disk-et-policykit/",date:"2014-06-18"},"/post/2014-05-26-earth-viewed-from-iss-zen-moment/":{title:"Earth viewed from ISS -  Zen moment...",tags:["zen"],content:`src = NASA
`,url:"/post/2014-05-26-earth-viewed-from-iss-zen-moment/",date:"2014-05-26"},"/post/2014-05-06-video-background/":{title:"Video background",tags:["css","html"],content:` Forget large background image for your web site. Now, comes video time.
So you want to put a nice video as background of your site but don&rsquo;t know how to do ? &ldquo;Fear you must not&rdquo; said Yoda as it&rsquo;s really simple.
First, have a look at the effect in action . Nice, isn&rsquo;t it ?
First thing first, the html :
&lt;video src=&#34;your-video.mp4&#34;&gt;&lt;/video&lt; &lt;div&gt; your fantastic text here &lt;/div&gt; Now, the css magic :
video { z-index: -999; position: fixed; min-height: 100%; min-width: 100%; } The z-index indicates that the video layer is in the background. Everything with a higher index will appear above.
The position fixed is mandatory, to make sure the overlay plays well.
Finally, ensure that the video dimension takes all space available, with the min height and width tags to 100%.
If you would like to have your text centered horizontally and vertically, just add this css :
html, body { width: 100%; height: 100%; } body {display:table;} div {display: table-cell; vertical-align: middle; text-align: center;} And that&rsquo;s all !
This method works on all major browser : I tested it on Firefox, Chrome and Safari. It also works unmodified on IE9 !
`,url:"/post/2014-05-06-video-background/",date:"2014-05-06"},"/post/2014-04-28-2048-gremlins/":{title:"2048 Gremlins",tags:["Javascript","web"],content:`
2048 : a very famous game where you have to slide the numbered tiles to join same numbers, and cumulate them to obtain 2048 !
Now, do you know Marmelab to brute force test web application : it&rsquo;s like releasing on your app thousand gremlins clicking every where, typing non-sense input on keyboard, so they may detect breaches in your app.
Ok, so I mixed the two of them, and I get 2048Gremlins ! It&rsquo;s like letting the gremlins play 2048 !
Disclaimer !
quick and dirty code here. I just wanted to show it&rsquo;s possible :-) only for Firefox : sorry for webkits engine (chrome, safari, &hellip;) but keyboard simulation does only work in Firefox (until someone points me to the solution for webkit :-) ) Gremlins are bad at 2048 :-) random isn&rsquo;t a good strategy to access high scores :-) It was fun to hack those wonderfull projects and it made me learn more things about gremlins.js.
`,url:"/post/2014-04-28-2048-gremlins/",date:"2014-04-28"},"/search/":{title:"",tags:[],content:"",url:"/search/",date:"2002-02-13"},"/404/":{title:"404 NOT FOUND",tags:[],content:`Page not found :
return to home page go to the blog search `,url:"/404/",date:"0001-01-01"},"/about/":{title:"About",tags:[],content:`My first experience with a personal computer was circa 1983 with the Sinclair ZX81 : I taught myself Basic so I could program games.
I did not have a tape recorder to save my programs, so each time I wanted to play a game, I had to type it !
Hopefully, the ZX81 had only 1 kB so the programs were small : RAM was full with 20 lines of BASIC.
The other good effect of having only 1 kB was that you are forced to be creative to solve problems. So after Basic, I taught myself the Z80 machine language and the glorious PEEK and POKE commands.
Since then, I never stopped to code on various machines (Amstrad CPC, Atari ST, Sun Sparc, IBM RS/6000&hellip;) and with fabulous languages (GFA Basic, 68000 Assembler, Turbo Pascal, C, Java, &hellip;).
After an university computer science degree in the middle of the 90&rsquo;s, I began working in the early Internet : Mosaïc was the king of the browser and Netscape the new kid on the block. My job was to code B2B services on the web with CGI (common gateway interfaces) using Perl, then Java servlet. Old good time !
Fast forward to 2002, after a few companies, big or small, startups, incubator, it comes the time I needed to have my own business adventure, so I co-founded Softinnov, a development shop specialized in web applications for businesses.
And I&rsquo;m still there developing online services !
You’ll find here mainly posts about programming languages, operating systems and applications related to the open-source eco-system and, occasionally, my random thoughts about topics that matter to me.
Contact me as @CodeCadim on Mastodon, or on my email brahim ( at ) hamdouni.com.
This blog is personal and opinions here are mine.
`,url:"/about/",date:"0001-01-01"},"/lists/":{title:"List",tags:[],content:"Go Go resources Videos Jim Keller: Moore&rsquo;s Law, Microprocessors, and First Principles | Lex Fridman Podcast #70 Micah Lee presents “Qubes OS: The Operating System That Can Protect You Even If You Get Hacked” youtube watch later La vie devant nous Disparaître - Sous les radars des algorithmes Coffee with Brian Kernighan - Computerphile ",url:"/lists/",date:"0001-01-01"}},idx=lunr(function(){this.use(lunr.fr),this.ref("id"),this.field("title",{boost:15}),this.field("tags"),this.field("content",{boost:10});for(const e in store)this.add({id:e,title:store[e].title,tags:store[e].category,content:store[e].content})})</script></html>